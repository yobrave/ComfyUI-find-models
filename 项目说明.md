# ComfyUI Find Models 项目说明

## 项目概述

这是一个 ComfyUI 自定义扩展，通过**按钮+弹窗界面**的方式，让用户一键查看当前工作流所需的模型状态。

## 设计理念

✅ **按钮方式**（而非节点方式）的优势：
- 不需要拖拽节点到画布
- 一键操作，更便捷
- 弹窗界面可以展示更丰富的信息
- 不占用工作流空间

## 功能特点

1. **一键查找**
   - 点击工具栏按钮即可分析当前工作流
   - 自动提取所有模型信息

2. **模型状态显示**
   - ✓ 已安装的模型（绿色）
   - ✗ 缺失的模型（红色）
   - 显示模型类型和派系

3. **派系识别**
   - 自动识别模型所属派系：
     - SDXL、SD1.5、SD2、SD3
     - Pony、Wan、Flux、LTX
     - Hunyuan、ZImage、AnimateDiff
     - SVD、Kandinsky、IF 等

4. **分类显示**
   - 按模型派系分组
   - 按模型类型分组
   - 缺失模型单独列出

## 文件结构

```
comfyUI-find-models/
├── __init__.py              # 节点注册（ComfyUI标准）
├── nodes.py                 # 核心逻辑（模型提取、状态检查）
├── server.py                # API端点（处理前端请求）
├── web/
│   └── find_models.js      # 前端界面（按钮+弹窗）
├── README.md                # 使用说明
├── 安装说明.md              # 安装步骤
└── requirements.txt         # 依赖（通常不需要）
```

## 技术实现

### 后端（Python）
- `nodes.py`: 实现模型提取、状态检查、派系识别
- `server.py`: 提供 `/find_models` API 端点
- 使用 ComfyUI 的 `folder_paths` 获取模型目录

### 前端（JavaScript）
- `find_models.js`: 
  - 添加工具栏按钮
  - 创建模态弹窗
  - 调用后端API
  - 展示模型状态

## 使用流程

1. 用户在 ComfyUI 中加载工作流
2. 点击工具栏上的 **"🔍 查找模型"** 按钮
3. 前端获取当前工作流数据
4. 发送到后端 `/find_models` API
5. 后端分析工作流，提取模型信息
6. 检查已安装的模型
7. 返回结果给前端
8. 前端在弹窗中展示结果

## 下一步优化建议

1. **集成下载链接**
   - 可以集成现有的 `get_workflow_models.py` 脚本
   - 在缺失模型旁边显示下载链接（Civitai/Hugging Face）

2. **一键下载**
   - 添加下载按钮
   - 自动下载缺失的模型

3. **模型管理**
   - 显示模型文件大小
   - 显示模型版本信息
   - 支持模型更新检查

4. **工作流对比**
   - 对比多个工作流的模型需求
   - 显示共同缺失的模型

## 安装位置

将整个 `comfyUI-find-models` 文件夹复制到：
```
ComfyUI/custom_nodes/comfyUI-find-models/
```

## 注意事项

- 需要 ComfyUI 支持自定义节点扩展
- 前端需要支持 ES6 模块
- 服务器扩展需要在 ComfyUI 启动时正确注册
